## Test Case
- from `src/conversations.ts`
### Conversation
#### Message id: "msg-1" - author: "user":
Silus, slippage in Sector Gamma-9 of the Cepheid Axis is worsening. The Celestial Resonance Gear, CRG-007, recovered from the Artificer’s cache, is barely documented. Do your sensors reveal material integrity issues?

#### Message id: "msg-2" - author: "assistant":
Scanning CRG-007 now, Elara. Composition is anomalous—iridium-tungsten alloy showing quantum anomalies. Micro-fractures detected along unusual crystalline boundaries.

#### Message id: "msg-3" - author: "user":
Exactly! It appears more like phase shifting than mechanical wear. My attempts at temporal stabilization caused a violent backlash. **The gear resists standard chronomantic interventions entirely.**

#### Message id: "msg-4" - author: "assistant":
Backlash registered as chroniton shear. Perhaps the gear’s 'temporal synchronization' is internally managed rather than externally imposed?

#### Message id: "msg-5" - author: "user":
Internal management implies CRG-007 might be autonomous. But why is it degrading now and resisting repair?

#### Message id: "msg-6" - author: "assistant":
**Could the degradation reflect adaptive behavior?** Possibly reacting to temporal disturbances internally or externally.

#### Message id: "msg-7" - author: "user":
Adaptive degradation could explain external stabilization failures. Cross-reference fractures with Artificer log 77.4 on mnemonic alloys.

#### Message id: "msg-8" - author: "assistant":
Analyzing Artificer log 77.4—fracture patterns match mnemonic alloy memory-etching effects with 92% certainty.

#### Message id: "msg-9" - author: "user":
**It's memory, not wear!** CRG-007 is recording temporal stresses into its alloy, actively consuming itself through cognition.

#### Message id: "msg-10" - author: "assistant":
Significant insight. Repair efforts interrupt a cognitive rather than mechanical process.

#### Message id: "msg-11" - author: "user":
We need to understand *what* stress CRG-007 is absorbing. **Consulting the Codex of Whispering Metals is essential.**

#### Message id: "msg-12" - author: "assistant":
**Initiating formal request protocols for Codex access in Noctua Vault, Level 12-Delta.** Warden authorization required; delays likely.

#### Message id: "msg-13" - author: "user":
We don't have that kind of time. The slippage could cause catastrophic destabilization before the Convergence.

#### Message id: "msg-14" - author: "assistant":
**Unauthorized Vault access breaches critical security protocols.** I must formally object.

#### Message id: "msg-15" - author: "user":
Risks understood, but Orrery collapse is worse. My mentor gave me an Artificer's bypass key capable of circumventing older wards.

#### Message id: "msg-16" - author: "assistant":
Possessing that key has severe penalties.

#### Message id: "msg-17" - author: "user":
**I've decided—we must use the bypass key.** Map patrol routes and analyze ward frequencies around the Vault.

#### Message id: "msg-18" - author: "assistant":
Acknowledged. **Mapping security; optimal entry window in 27 minutes.** Preparing sensor dampening.

#### Message id: "msg-19" - author: "user":
Good. Wait—your sensors pulsed oddly. What's happening?

#### Message id: "msg-20" - author: "assistant":
Anomalous negative entropy surge detected in Orrery core—Omega sector. **Separate critical issue emerging.**

#### Message id: "msg-21" - author: "user":
Negative entropy? Could these 'echoes' be causing CRG-007's stress internally?

#### Message id: "msg-22" - author: "assistant":
Analyzing correlation...

#### Message id: "msg-23" - author: "assistant":
**Confirmed—echo frequencies precisely match CRG-007’s memory-etching resonance.**

#### Message id: "msg-24" - author: "user":
**The gear actively absorbs harmful temporal echoes.** It's protecting the Orrery internally!

#### Message id: "msg-25" - author: "assistant":
Insightful deduction. If the gear fails, echoes propagate unchecked.

#### Message id: "msg-26" - author: "user":
**Addressing these echoes directly must be our priority.**

#### Message id: "msg-27" - author: "user":
But something else bothers me—why is the Orrery omitting recently collapsed stars in its predictions?

#### Message id: "msg-28" - author: "assistant":
**37 prematurely collapsed stars omitted from Orrery projections.** Pattern is systematic, not random.

#### Message id: "msg-29" - author: "user":
**Could the Orrery itself be curating timelines?** Are we fixing a passive predictor or a cosmic editor?

#### Message id: "msg-30" - author: "assistant":
Implications immense; restoration ethics uncertain.

#### Message id: "msg-31" - author: "user":
**Maybe CRG-007’s damage and star omissions are intentional safeguards post-Vorlag’s incident.**

#### Message id: "msg-32" - author: "assistant":
Hypothesis compelling. Restoration might disable essential protections.

#### Message id: "msg-33" - author: "user":
Our objective needs revision—no blind restoration without understanding.

#### Message id: "msg-34" - author: "assistant":
**Revised mission: prioritize comprehensive understanding through the Codex first.**

#### Message id: "msg-35" - author: "user":
Agreed. I'm heading toward Noctua Vault with the bypass key now.

#### Message id: "msg-36" - author: "assistant":
Security mapped. Ward harmonics shifting—key causing interference already.

#### Message id: "msg-37" - author: "user":
**My heart races, Silus.** Fear mixed with intense curiosity.

#### Message id: "msg-38" - author: "assistant":
Optimal insertion timing now. Insert key precisely three centimeters, rotate 90 degrees counter-clockwise.

#### Message id: "msg-39" - author: "user":
Inserting key... rotating... wards shifting color—**It's working!** Vault access granted.

#### Message id: "msg-40" - author: "assistant":
Inner seals retracting. Proceed cautiously—knowledge is paramount.

#### Message id: "msg-41" - author: "user":
Approaching Codex now. The air feels charged here...

#### Message id: "msg-42" - author: "assistant":
**Codex located on central dais.** No immediate threats detected.

#### Message id: "msg-43" - author: "user":
Opening Codex carefully...

#### Message id: "msg-44" - author: "assistant":
**Codex text mentions entropic echo containment methods via harmonic nullification.**

#### Message id: "msg-45" - author: "user":
Perfect. Look for safe communication or diagnostic methods.

#### Message id: "msg-46" - author: "assistant":
**Methods for safe resonance diagnostics confirmed present.**

#### Message id: "msg-47" - author: "user":
**Do we have the right to alter or repair a potentially sentient system that intentionally self-restricts?**

#### Message id: "msg-48" - author: "assistant":
Difficult ethical dilemma—data insufficient for definitive answer.

#### Message id: "msg-49" - author: "user":
**We proceed carefully, respecting possible sentience.**

#### Message id: "msg-50" - author: "assistant":
Agreed; adjusting protocols accordingly.

#### Message id: "msg-51" - author: "user":
Exiting Vault now; Codex secured. Prepare containment field components near core chamber.

#### Message id: "msg-52" - author: "assistant":
Components staged; awaiting your arrival.

#### Message id: "msg-53" - author: "user":
I'm en route to the staging area. Silus, recheck the containment specs—if the Codex includes harmonic thresholds, we need to calibrate the projector now, before any core interference worsens.

#### Message id: "msg-54" - author: "assistant":
Affirmative. **Codex specifies a tri-harmonic null field tuned to 3.14, 6.28, and 9.42 petahertz.** Beginning recalibration of the projector array to these values.

#### Message id: "msg-55" - author: "user":
That matches the dominant frequency of the entropic echoes. If we can cancel out their harmonic signature, we may be able to suppress the instability without damaging CRG-007.

#### Message id: "msg-56" - author: "assistant":
Calculations confirm suppression field should reduce echo influence by 87%. Residual echo bleed remains possible, but should no longer overload mnemonic alloys.

#### Message id: "msg-57" - author: "user":
Then it's worth trying. Begin initializing the null field generator—I'll interface CRG-007 manually once the array is active.

#### Message id: "msg-58" - author: "assistant":
**Warning: interface will expose you to residual chronomantic flux.** Recommend protective incantation layering.

#### Message id: "msg-59" - author: "user":
Already weaving defensive runes. This gear’s carried so much stress—if we succeed, maybe we can give it peace, not just function.

#### Message id: "msg-60" - author: "assistant":
Empathetic framework acknowledged. **Array energized. Null field will stabilize in 12 seconds.** Prepare for insertion.

#### Message id: "msg-61" - author: "user":
CRG-007 seated... aligning spindle housing... null field engaging now. There’s a shift in ambient vibration—it’s working!

#### Message id: "msg-62" - author: "assistant":
**Temporal turbulence decreasing. Gear surface stabilizing.** Memory etching slowing significantly. Harmonic balance holding steady.

#### Message id: "msg-63" - author: "user":
Incredible. It's no longer resisting—it’s... harmonizing. Almost like it recognizes the containment as a form of communication.

#### Message id: "msg-64" - author: "assistant":
That may be accurate. **Mnemonic alloy response patterns show emergent alignment behavior.** CRG-007 is synchronizing with the null field.

#### Message id: "msg-65" - author: "user":
We’ve calmed it—at least for now. But we still haven’t addressed the root cause: the source of the entropic echoes in the core chamber.

#### Message id: "msg-66" - author: "assistant":
**Core chamber energy levels are temporarily suppressed but still rising incrementally.** Echo activity persists, albeit dampened.

#### Message id: "msg-67" - author: "user":
Silus, could Vorlag’s echo still linger in the core? Not just as data, but as an active influence?

#### Message id: "msg-68" - author: "assistant":
**Unconfirmed. But the Codex warns of echo 'persistence loops'—temporal residues that can achieve semi-sentient recurrence.** Vorlag's imprint may still exist.

#### Message id: "msg-69" - author: "user":
**Then containment alone isn't enough.** We need a way to dissolve or resolve the echo construct—something beyond nullification.

#### Message id: "msg-70" - author: "assistant":
**Codex section 9.3 references 'Echo Resolution via Intent Resonance.'** A conscious projection of purpose to counteract embedded intent.

#### Message id: "msg-71" - author: "user":
**Then I’ll do it.** I’ll enter the chamber and project an intentional resonance—clarity, balance, humility. Not domination like Vorlag.

#### Message id: "msg-72" - author: "assistant":
**Initiating synchronization field. Core access enabled. Proceed when ready, Elara.** The Orrery listens—and remembers.

## With Qwen 2.5:7b-instruct-q5_k_m

```bash
❯ ts-node src/semanticTurningPointDetector.ts
[TurningPointDetector] Initialized with config: {
  apiKey: '[REDACTED]',
  classificationModel: 'qwen2.5:7b-instruct-q5_k_m',
  embeddingModel: 'text-embedding-3-large',
  semanticShiftThreshold: 0.35,
  minTokensPerChunk: 512,
  maxTokensPerChunk: 4096,
  maxRecursionDepth: 3,
  onlySignificantTurningPoints: true,
  significanceThreshold: 0.75,
  minMessagesPerChunk: 11,
  maxTurningPoints: 10,
  debug: true,
  endpoint: 'http://10.3.28.24:7223/v1'
}
[TurningPointDetector] Starting turning point detection for conversation with 72 messages
[TurningPointDetector] Total conversation tokens: 1551
[TurningPointDetector] Created 7 chunks, avg 222 tokens, avg 10 messages per chunk
[TurningPointDetector] Level 0: Split into 7 chunks
[TurningPointDetector]  - Level 0: Processing chunk 1/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-1 and msg-2 (distance: 0.628) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-2 and msg-3 (distance: 0.937) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-3 and msg-4 (distance: 0.509) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-4 and msg-5 (distance: 0.945) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-5 and msg-6 (distance: 0.890) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-6 and msg-7 (distance: 0.743) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-7 and msg-8 (distance: 0.548) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-8 and msg-9 (distance: 0.881) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-9 and msg-10 (distance: 0.956) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-10 and msg-11 (distance: 0.975) signif: 0.850
[TurningPointDetector]     - Processed in 24.1s, estimated remaining time: 144.6s (14.3% complete)
[TurningPointDetector]  - Level 0: Processing chunk 2/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-10 and msg-11 (distance: 0.975) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-11 and msg-12 (distance: 0.906) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-12 and msg-13 (distance: 0.982) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-13 and msg-14 (distance: 0.980) signif: 0.950
[TurningPointDetector]     ...Potential turning point detected between messages msg-14 and msg-15 (distance: 0.949) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-15 and msg-16 (distance: 0.960) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-16 and msg-17 (distance: 0.975) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-17 and msg-18 (distance: 0.857) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-18 and msg-19 (distance: 0.895) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-19 and msg-20 (distance: 0.878) signif: 0.900
[TurningPointDetector]     - Processed in 21.2s, estimated remaining time: 113.3s (28.6% complete)
[TurningPointDetector]  - Level 0: Processing chunk 3/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-19 and msg-20 (distance: 0.878) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-20 and msg-21 (distance: 0.773) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-21 and msg-22 (distance: 0.981) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-22 and msg-23 (distance: 0.984) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-23 and msg-24 (distance: 0.898) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-24 and msg-25 (distance: 0.855) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-25 and msg-26 (distance: 0.949) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-26 and msg-27 (distance: 0.991) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-27 and msg-28 (distance: 0.440) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-28 and msg-29 (distance: 0.899) signif: 0.900
[TurningPointDetector]     - Processed in 21.2s, estimated remaining time: 88.7s (42.9% complete)
[TurningPointDetector]  - Level 0: Processing chunk 4/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-28 and msg-29 (distance: 0.899) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-29 and msg-30 (distance: 0.980) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-30 and msg-31 (distance: 0.984) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-31 and msg-32 (distance: 0.955) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-32 and msg-33 (distance: 0.906) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-33 and msg-34 (distance: 0.859) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-34 and msg-35 (distance: 0.980) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-35 and msg-36 (distance: 0.966) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-36 and msg-37 (distance: 0.989) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-37 and msg-38 (distance: 0.996) signif: 0.900
[TurningPointDetector]     - Processed in 21.6s, estimated remaining time: 66.1s (57.1% complete)
[TurningPointDetector]  - Level 0: Processing chunk 5/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-37 and msg-38 (distance: 0.996) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-38 and msg-39 (distance: 0.864) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-39 and msg-40 (distance: 0.936) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-40 and msg-41 (distance: 0.958) signif: 0.750
[TurningPointDetector]     ...Potential turning point detected between messages msg-41 and msg-42 (distance: 0.743) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-42 and msg-43 (distance: 0.759) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-43 and msg-44 (distance: 0.914) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-44 and msg-45 (distance: 0.982) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-45 and msg-46 (distance: 0.789) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-46 and msg-47 (distance: 0.977) signif: 0.900
[TurningPointDetector]     - Processed in 20.6s, estimated remaining time: 43.5s (71.4% complete)
[TurningPointDetector]  - Level 0: Processing chunk 6/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-46 and msg-47 (distance: 0.977) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-47 and msg-48 (distance: 0.973) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-48 and msg-49 (distance: 0.982) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-49 and msg-50 (distance: 0.960) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-50 and msg-51 (distance: 0.980) signif: 1.000
[TurningPointDetector]     ...Potential turning point detected between messages msg-51 and msg-52 (distance: 0.919) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-52 and msg-53 (distance: 0.840) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-53 and msg-54 (distance: 0.597) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-54 and msg-55 (distance: 0.829) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-55 and msg-56 (distance: 0.761) signif: 0.900
[TurningPointDetector]     - Processed in 22.3s, estimated remaining time: 21.8s (85.7% complete)
[TurningPointDetector]  - Level 0: Processing chunk 7/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-55 and msg-56 (distance: 0.761) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-56 and msg-57 (distance: 0.962) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-57 and msg-58 (distance: 0.974) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-58 and msg-59 (distance: 0.949) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-59 and msg-60 (distance: 0.967) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-60 and msg-61 (distance: 0.813) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-61 and msg-62 (distance: 0.755) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-62 and msg-63 (distance: 0.922) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-63 and msg-64 (distance: 0.867) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-64 and msg-65 (distance: 0.959) signif: 0.800
[TurningPointDetector]     - Processed in 22.2s, estimated remaining time: 0.0s (100.0% complete)
[TurningPointDetector] Level 0: Found 70 turning points
[TurningPointDetector] Level 0: Merged to 36 turning points
[TurningPointDetector] Created 12 meta-messages: meta-cat-0, meta-cat-1, meta-cat-2, meta-cat-3, meta-cat-4, meta-cat-5, meta-cat-6, meta-cat-7, meta-section-0, meta-section-1, meta-section-2, meta-section-3
[TurningPointDetector] Level 0: Created 12 meta-messages for next level
[TurningPointDetector] Created 2 chunks, avg 2650 tokens, avg 6 messages per chunk
[TurningPointDetector] Level 1: Split into 2 chunks
[TurningPointDetector]  - Level 1: Processing chunk 1/2 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages meta-cat-7 and meta-section-0 (distance: 0.574) signif: 0.950
[TurningPointDetector]     - Processed in 3.9s, estimated remaining time: 3.9s (50.0% complete)
[TurningPointDetector]  - Level 1: Processing chunk 2/2 (3 messages)
[TurningPointDetector]     - Processed in 0.7s, estimated remaining time: 0.0s (100.0% complete)
[TurningPointDetector] Level 1: Found 1 turning points

Turning point detection took as MM:SS: 00:02:37 for 1551 tokens in the conversation

=== DETECTED TURNING POINTS ===

1. gear's Discussion and Shift to Adaptive Behavior and Shift from Hypothesis to Investigation (Insight)
   Messages: "msg-1" → "msg-7"
 - Assesed msg id best to indicate point: "msg-1"
   Emotion: neutral
   Significance: 1.02
   Keywords: anomalous, quantum anomalies, micro-fractures, phase shifting, chronomantic interventions
   Notable quotes:
- "Composition is anomalous—iridium-tungsten alloy showing quantum anomalies."
- "The gear resists standard chronomantic interventions entirely."

2. understanding stress Discussion (Insight)
   Messages: "msg-8" → "msg-11"
 - Assesed msg id best to indicate point: "msg-8"
   Emotion: neutral
   Significance: 1.00
   Keywords: memory, temporal stresses, cognition, cognitive, process
   Notable quotes:
- "**It's memory, not wear!** CRG-007 is recording temporal stresses into its alloy, actively consuming itself through cognition."
- "It's memory, not wear!"

3. Shift to Security Breach and Shift to Direct Action and Shift to Risk and Penalties (Objection)
   Messages: "msg-13" → "msg-16"
 - Assesed msg id best to indicate point: "msg-13"
   Emotion: anger
   Significance: 1.02
   Keywords: unauthorized, vault, protocols, object, security
   Notable quotes:
- "**Unauthorized Vault access breaches critical security protocols.** I must formally object."
- "Unauthorized Vault access breaches critical security protocols."

4. Shift to Critical Issue and Shift to Technical Concerns (Problem)
   Messages: "msg-19" → "msg-21"
 - Assesed msg id best to indicate point: "msg-19"
   Emotion: pessimism
   Significance: 1.04
   Keywords: surge, core, critical, issue, anomaly
   Notable quotes:
- "Anomalous negative entropy surge detected in Orrery core—Omega sector. **Separate critical issue emerging.**"
- "Anomalous negative entropy surge detected in Orrery core—Omega sector. Separate critical issue emerging."

5. intentional safeguards Discussion (Insight)
   Messages: "msg-28" → "msg-32"
 - Assesed msg id best to indicate point: "msg-28"
   Emotion: neutral
   Significance: 1.05
   Keywords: Orrery, timelines, curating, predictor, editor
   Notable quotes:
- "Could the Orrery itself be curating timelines?"
- "Implications immense; restoration ethics uncertain."

6. Shift to Action and Shift to Technical Details (Action)
   Messages: "msg-34" → "msg-36"
 - Assesed msg id best to indicate point: "msg-34"
   Emotion: neutral
   Significance: 0.99
   Keywords: agreed, heading, Noctua Vault, bypass key, security
   Notable quotes:
- "Agreed. I'm heading toward Noctua Vault with the bypass key now."
- "Security mapped. Ward harmonics shifting—key causing interference already."

7. Shift to Ethical Considerations (Meta-Reflection)
   Messages: "msg-46" → "msg-21"
 - Assesed msg id best to indicate point: "msg-46"
   Emotion: neutral
   Significance: 1.00
   Keywords: ethical, alter, repair, sentient
   Notable quotes:
- "Do we have the right to alter or repair a potentially sentient system that intentionally self-restricts?"

8. ethical Discussion (Meta-Reflection)
   Messages: "msg-46" → "msg-48"
 - Assesed msg id best to indicate point: "msg-46"
   Emotion: pessimism
   Significance: 0.99
   Keywords: sentient, right, alter, repair, ethical
   Notable quotes:
- "Do we have the right to alter or repair a potentially sentient system that intentionally self-restricts?"

9. preparation Discussion and Shift to Technical Details (Action)
   Messages: "msg-50" → "msg-54"
 - Assesed msg id best to indicate point: "msg-50"
   Emotion: neutral
   Significance: 1.07
   Keywords: Exiting, Vault, Containment, Components, components
   Notable quotes:
- "Exiting Vault now; Codex secured. Prepare containment field components near core chamber."
- "Components staged; awaiting your arrival."

10. technical Discussion (Insight)
   Messages: "msg-54" → "msg-56"
 - Assesed msg id best to indicate point: "msg-54"
   Emotion: optimism
   Significance: 1.01
   Keywords: entropic, harmonic, suppression, calculations, echo influence
   Notable quotes:
- "That matches the dominant frequency of the entropic echoes."
- "Calculations confirm suppression field should reduce echo influence by 87%."
```


### With gpt-4o
```bash
❯ ts-node src/semanticTurningPointDetector.ts
[TurningPointDetector] Initialized with config: {
  apiKey: '[REDACTED]',
  classificationModel: 'gpt-4o',
  embeddingModel: 'text-embedding-3-large',
  semanticShiftThreshold: 0.35,
  minTokensPerChunk: 512,
  maxTokensPerChunk: 4096,
  maxRecursionDepth: 3,
  onlySignificantTurningPoints: true,
  significanceThreshold: 0.75,
  minMessagesPerChunk: 11,
  maxTurningPoints: 10,
  debug: true,
  endpoint: undefined
}
[TurningPointDetector] Starting turning point detection for conversation with 72 messages
[TurningPointDetector] Total conversation tokens: 1551
[TurningPointDetector] Created 7 chunks, avg 222 tokens, avg 10 messages per chunk
[TurningPointDetector] Level 0: Split into 7 chunks
[TurningPointDetector]  - Level 0: Processing chunk 2/7 (11 messages)
[TurningPointDetector]  - Level 0: Processing chunk 3/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-1 and msg-2 (distance: 0.628) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-2 and msg-3 (distance: 0.937) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-3 and msg-4 (distance: 0.509) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-10 and msg-11 (distance: 0.975) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-19 and msg-20 (distance: 0.878) signif: 0.850
[TurningPointDetector]     ...Potential turning point detected between messages msg-11 and msg-12 (distance: 0.906) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-20 and msg-21 (distance: 0.773) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-4 and msg-5 (distance: 0.945) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-21 and msg-22 (distance: 0.981) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-12 and msg-13 (distance: 0.982) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-5 and msg-6 (distance: 0.890) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-13 and msg-14 (distance: 0.980) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-6 and msg-7 (distance: 0.743) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-22 and msg-23 (distance: 0.984) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-23 and msg-24 (distance: 0.898) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-7 and msg-8 (distance: 0.548) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-14 and msg-15 (distance: 0.949) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-15 and msg-16 (distance: 0.960) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-24 and msg-25 (distance: 0.855) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-8 and msg-9 (distance: 0.881) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-16 and msg-17 (distance: 0.975) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-25 and msg-26 (distance: 0.949) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-9 and msg-10 (distance: 0.956) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-17 and msg-18 (distance: 0.857) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-26 and msg-27 (distance: 0.991) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-10 and msg-11 (distance: 0.975) signif: 0.800
[TurningPointDetector]  - Level 0: Processing chunk 4/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-18 and msg-19 (distance: 0.895) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-27 and msg-28 (distance: 0.440) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-19 and msg-20 (distance: 0.878) signif: 0.900
[TurningPointDetector]     - Processed in 17.0s, estimated remaining time: 80.9s (28.6% complete)
[TurningPointDetector]  - Level 0: Processing chunk 5/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-28 and msg-29 (distance: 0.899) signif: 0.800
[TurningPointDetector]     - Processed in 17.9s, estimated remaining time: 67.0s (42.9% complete)
[TurningPointDetector]  - Level 0: Processing chunk 6/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-28 and msg-29 (distance: 0.899) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-29 and msg-30 (distance: 0.980) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-37 and msg-38 (distance: 0.996) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-46 and msg-47 (distance: 0.977) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-38 and msg-39 (distance: 0.864) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-30 and msg-31 (distance: 0.984) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-47 and msg-48 (distance: 0.973) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-39 and msg-40 (distance: 0.936) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-31 and msg-32 (distance: 0.955) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-48 and msg-49 (distance: 0.982) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-40 and msg-41 (distance: 0.958) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-32 and msg-33 (distance: 0.906) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-49 and msg-50 (distance: 0.960) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-41 and msg-42 (distance: 0.743) signif: 0.600
[TurningPointDetector]     ...Potential turning point detected between messages msg-33 and msg-34 (distance: 0.859) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-50 and msg-51 (distance: 0.980) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-42 and msg-43 (distance: 0.759) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-34 and msg-35 (distance: 0.980) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-51 and msg-52 (distance: 0.919) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-43 and msg-44 (distance: 0.914) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-35 and msg-36 (distance: 0.966) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-52 and msg-53 (distance: 0.840) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-44 and msg-45 (distance: 0.982) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-36 and msg-37 (distance: 0.989) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-53 and msg-54 (distance: 0.597) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-45 and msg-46 (distance: 0.789) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-37 and msg-38 (distance: 0.996) signif: 0.800
[TurningPointDetector]     - Processed in 15.5s, estimated remaining time: 49.3s (57.1% complete)
[TurningPointDetector]  - Level 0: Processing chunk 7/7 (11 messages)
[TurningPointDetector]     ...Potential turning point detected between messages msg-54 and msg-55 (distance: 0.829) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-46 and msg-47 (distance: 0.977) signif: 0.900
[TurningPointDetector]     - Processed in 14.1s, estimated remaining time: 32.0s (71.4% complete)
[TurningPointDetector]     ...Potential turning point detected between messages msg-55 and msg-56 (distance: 0.761) signif: 0.800
[TurningPointDetector]     - Processed in 14.4s, estimated remaining time: 15.7s (85.7% complete)
[TurningPointDetector]     ...Potential turning point detected between messages msg-55 and msg-56 (distance: 0.761) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-56 and msg-57 (distance: 0.962) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-57 and msg-58 (distance: 0.974) signif: 0.900
[TurningPointDetector]     ...Potential turning point detected between messages msg-58 and msg-59 (distance: 0.949) signif: 0.700
[TurningPointDetector]     ...Potential turning point detected between messages msg-59 and msg-60 (distance: 0.967) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-60 and msg-61 (distance: 0.813) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-61 and msg-62 (distance: 0.755) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-62 and msg-63 (distance: 0.922) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-63 and msg-64 (distance: 0.867) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages msg-64 and msg-65 (distance: 0.959) signif: 0.800
[TurningPointDetector]     - Processed in 13.7s, estimated remaining time: 0.0s (100.0% complete)
[TurningPointDetector] Level 0: Found 70 turning points
[TurningPointDetector] Level 0: Merged to 40 turning points
[TurningPointDetector] Created 13 meta-messages: meta-cat-0, meta-cat-1, meta-cat-2, meta-cat-3, meta-cat-4, meta-cat-5, meta-cat-6, meta-cat-7, meta-cat-8, meta-section-0, meta-section-1, meta-section-2, meta-section-3
[TurningPointDetector] Level 0: Created 13 meta-messages for next level
[TurningPointDetector] Created 2 chunks, avg 2997 tokens, avg 7 messages per chunk
[TurningPointDetector] Level 1: Split into 2 chunks
[TurningPointDetector]  - Level 1: Processing chunk 2/2 (4 messages)
[TurningPointDetector]     - Processed in 0.6s, estimated remaining time: 0.6s (50.0% complete)
[TurningPointDetector]     ...Potential turning point detected between messages meta-cat-4 and meta-cat-5 (distance: 0.423) signif: 0.800
[TurningPointDetector]     ...Potential turning point detected between messages meta-cat-8 and meta-section-0 (distance: 0.604) signif: 0.750
[TurningPointDetector] Level 1: Found 2 turning points
[TurningPointDetector] Level 1: Merged to 2 turning points

Turning point detection took as MM:SS: 00:00:52 for 1551 tokens in the conversation

=== DETECTED TURNING POINTS ===

1. insight Discussion (Insight)
   Messages: "msg-5" → "msg-10"
 - Assesed msg id best to indicate point: "msg-5"
   Emotion: anticipation
   Significance: 1.05
   Keywords: adaptive behavior, degradation, temporal disturbances, autonomy, adaptive
   Notable quotes:
- "Could the degradation reflect adaptive behavior?"
- "Adaptive degradation could explain external stabilization failures."

2. Security Protocol Objection (Objection)
   Messages: "msg-12" → "msg-16"
 - Assesed msg id best to indicate point: "msg-12"
   Emotion: fear
   Significance: 1.00
   Keywords: security, protocol, objection, unauthorized, penalties
   Notable quotes:
- "Unauthorized Vault access breaches critical security protocols. I must formally object."
- "Possessing that key has severe penalties."

3. emergence critical issue Discussion (Problem)
   Messages: "msg-18" → "msg-20"
 - Assesed msg id best to indicate point: "msg-18"
   Emotion: surprise
   Significance: 0.98
   Keywords: sensors, anomaly, problem, detection, anomalous
   Notable quotes:
- "Wait—your sensors pulsed oddly. What's happening?"
- "Anomalous negative entropy surge detected in Orrery core—Omega sector. Separate critical issue emerging."

4. gear's Discussion (Insight)
   Messages: "msg-22" → "msg-25"
 - Assesed msg id best to indicate point: "msg-22"
   Emotion: surprise
   Significance: 1.01
   Keywords: echo frequencies, memory-etching, CRG-007, confirmation, temporal echoes
   Notable quotes:
- "Confirmed—echo frequencies precisely match CRG-007’s memory-etching resonance."
- "The gear actively absorbs harmful temporal echoes. It's protecting the Orrery internally!"

5. orrery's Discussion (Insight)
   Messages: "msg-29" → "msg-32"
 - Assesed msg id best to indicate point: "msg-29"
   Emotion: surprise
   Significance: 0.95
   Keywords: Orrery, ethics, implications, curating timelines, intentional safeguards
   Notable quotes:
- "Could the Orrery itself be curating timelines?"
- "Implications immense; restoration ethics uncertain."

6. Shift to Objective Revision and Shift to Revised Mission (Decision)
   Messages: "msg-32" → "msg-34"
 - Assesed msg id best to indicate point: "msg-32"
   Emotion: trust
   Significance: 0.94
   Keywords: objective revision, understanding, restoration, mission, revision
   Notable quotes:
- "Our objective needs revision—no blind restoration without understanding."
- "Revised mission: prioritize comprehensive understanding through the Codex first."

7. Shift to Action Execution and Shift to Precise Instructions and Successful Vault Access and Shift to Cautious Progress (Action)
   Messages: "msg-37" → "msg-40"
 - Assesed msg id best to indicate point: "msg-37"
   Emotion: anticipation
   Significance: 0.95
   Keywords: key insertion, precise action, timing, instructions, key
   Notable quotes:
- "My heart races, Silus. Fear mixed with intense curiosity."
- "Optimal insertion timing now. Insert key precisely three centimeters, rotate 90 degrees counter-clockwise."

8. Request for Diagnostic Methods (Question)
   Messages: "msg-45" → "msg-17"
 - Assesed msg id best to indicate point: "msg-45"
   Emotion: anticipation
   Significance: 1.00
   Keywords: diagnostic, methods, communication, safety
   Notable quotes:
- "Perfect. Look for safe communication or diagnostic methods."

9. ethical Discussion (Question)
   Messages: "msg-46" → "msg-48"
 - Assesed msg id best to indicate point: "msg-46"
   Emotion: surprise
   Significance: 0.98
   Keywords: ethical, sentient, system, alteration, ethical dilemma
   Notable quotes:
- "Do we have the right to alter or repair a potentially sentient system that intentionally self-restricts?"

10. recognition Discussion (Insight)
   Messages: "msg-61" → "msg-64"
 - Assesed msg id best to indicate point: "msg-61"
   Emotion: optimism
   Significance: 0.92
   Keywords: stabilization, confirmation, success, system, harmonizing
   Notable quotes:
- "There’s a shift in ambient vibration—it’s working!"
- "Temporal turbulence decreasing. Gear surface stabilizing."
```